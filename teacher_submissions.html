<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Quáº£n lÃ½ bÃ i ná»™p</title>
</head>
<body>
  <h2>Danh sÃ¡ch bÃ i ná»™p</h2>
  <button id="loadSubmissions">Táº£i danh sÃ¡ch</button>

  <div id="list" style="margin-top:20px;"></div>

  <script>
    document.getElementById("loadSubmissions").addEventListener("click", async () => {
      try {
        // Äá»c file submissions.json tá»« server
        const res = await fetch("http://localhost:3000/submissions.json");
        if (!res.ok) {
          throw new Error("KhÃ´ng thá»ƒ táº£i submissions.json");
        }
        const submissions = await res.json();

        // Hiá»ƒn thá»‹ danh sÃ¡ch
        const listDiv = document.getElementById("list");
        listDiv.innerHTML = "";

        submissions.forEach(sub => {
          const safeName = sub.student.replace(/\s+/g, "_").toLowerCase();
          const date = sub.date || new Date().toISOString().split("T")[0];
          const fileName = `${safeName}_${date}.pdf`;
          const pdfUrl = `http://localhost:3000/submissions/${fileName}`;

          const item = document.createElement("div");
          item.innerHTML = `
            <p>
              ğŸ‘©â€ğŸ“ <strong>${sub.student}</strong> - NgÃ y: ${date} <br/>
              <a href="${pdfUrl}" target="_blank">ğŸ“„ Táº£i bÃ i lÃ m (PDF)</a>
            </p>
          `;
          listDiv.appendChild(item);
        });
      } catch (err) {
        console.error(err);
        document.getElementById("list").innerText = "Lá»—i khi táº£i danh sÃ¡ch bÃ i ná»™p.";
      }
    });
  </script>
</body>
</html>